{"ast":null,"code":"import \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/layout/style\";\nimport _Layout from \"antd/es/layout\";\nvar _jsxFileName = \"/Users/ao/WebstormProjects/react-management/src/components/head/head.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport './head.less';\nimport LinkButton from '../link-button/button';\nimport { formateDate } from '../../utils/dateUtils';\nimport { reqWeather } from '../../api/index';\nimport menuList from '../../config/menuConfig';\nimport memoryUtils from '../../utils/memoryUtils';\nimport storageUtils from '../../utils/storageUtils';\nconst Header = _Layout.Header;\n\nclass Head extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentTime: formateDate(Date.now()),\n      dayPictureUrl: '',\n      weather: ''\n    };\n\n    this.getWeather = async () => {\n      const _ref = await reqWeather('成都'),\n            dayPictureUrl = _ref.dayPictureUrl,\n            weather = _ref.weather;\n\n      this.setState({\n        dayPictureUrl,\n        weather\n      });\n    };\n\n    this.getTime = () => {\n      this.intervalId = setInterval(() => {\n        const currentTime = formateDate(Date.now());\n        this.setState({\n          currentTime\n        });\n      }, 1000);\n    };\n\n    this.getTitle = () => {\n      const path = this.props.location.pathname;\n      let title;\n      menuList.forEach(item => {\n        if (item.key === path) {\n          title = item.title;\n        } else if (item.children) {\n          const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0);\n\n          if (cItem) {\n            title = cItem.title;\n          }\n        }\n      });\n      return title;\n    };\n\n    this.handleLogout = () => {\n      _Modal.confirm({\n        content: '确定退出吗?',\n        onOk: () => {\n          memoryUtils.user = {};\n          storageUtils.removeUser();\n          this.props.history.push('/login');\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getTime();\n    this.getWeather();\n  }\n\n  componentWillMount() {\n    this.title = this.getTitle();\n    clearInterval(this.intervalId);\n  }\n\n  render() {\n    const _this$state = this.state,\n          currentTime = _this$state.currentTime,\n          dayPictureUrl = _this$state.dayPictureUrl,\n          weather = _this$state.weather;\n    const username = memoryUtils.user.username;\n    const title = this.getTitle();\n    return React.createElement(Header, {\n      style: {\n        background: '#fff',\n        padding: 0,\n        height: 80,\n        position: 'fixed',\n        left: 200,\n        right: 0,\n        zIndex: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        float: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"\\u6B22\\u8FCE, \", username), React.createElement(LinkButton, {\n      onClick: this.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"logout\",\n      style: {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), \" \\u9000\\u51FA\")), React.createElement(\"div\", {\n      className: \"header-bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header-bottom-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, title), React.createElement(\"div\", {\n      className: \"header-bottom-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, currentTime), React.createElement(\"img\", {\n      src: dayPictureUrl,\n      alt: \"weather\",\n      style: {\n        margin: '0 10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, weather))));\n  }\n\n}\n\nexport default withRouter(Head);","map":{"version":3,"sources":["/Users/ao/WebstormProjects/react-management/src/components/head/head.jsx"],"names":["React","Component","withRouter","LinkButton","formateDate","reqWeather","menuList","memoryUtils","storageUtils","Header","Head","state","currentTime","Date","now","dayPictureUrl","weather","getWeather","setState","getTime","intervalId","setInterval","getTitle","path","props","location","pathname","title","forEach","item","key","children","cItem","find","indexOf","handleLogout","confirm","content","onOk","user","removeUser","history","push","componentDidMount","componentWillMount","clearInterval","render","username","background","padding","height","position","left","right","zIndex","float","margin"],"mappings":"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","sourcesContent":["import  React,{Component} from 'react';\nimport {Layout,Icon,Modal} from 'antd';\nimport {withRouter} from 'react-router-dom';\n\n\nimport './head.less';\nimport LinkButton from '../link-button/button';\nimport {formateDate} from '../../utils/dateUtils';\nimport {reqWeather} from '../../api/index';\nimport menuList from '../../config/menuConfig';\nimport memoryUtils from '../../utils/memoryUtils';\nimport storageUtils from '../../utils/storageUtils';\nconst {Header}=Layout;\nclass Head extends  Component {\n  state = {\n    currentTime: formateDate(Date.now()),\n    dayPictureUrl: '',\n    weather: '',\n  };\n  getWeather=async ()=>{\n    const {dayPictureUrl, weather} = await reqWeather('成都');\n    this.setState({dayPictureUrl, weather});\n  };\n  getTime = () => {\n    this.intervalId = setInterval(() => {\n      const currentTime = formateDate(Date.now());\n      this.setState({currentTime})\n    }, 1000)\n  };\n  getTitle = () => {\n    const path = this.props.location.pathname;\n    let title;\n    menuList.forEach(item => {\n      if (item.key===path) {\n        title = item.title\n      } else if (item.children) {\n        const cItem = item.children.find(cItem => path.indexOf(cItem.key)===0);\n        if(cItem) {\n          title = cItem.title;\n        }\n      }\n    });\n    return title;\n  };\n  handleLogout=()=>{\n    Modal.confirm({\n      content: '确定退出吗?',\n      onOk: () => {\n        memoryUtils.user={};\n        storageUtils.removeUser();\n        this.props.history.push('/login');\n      }\n    });\n  };\n\n  componentDidMount(){\n    this.getTime();\n    this.getWeather();\n  }\n  componentWillMount() {\n    this.title=this.getTitle();\n    clearInterval(this.intervalId);\n  }\n\n  render() {\n    const {currentTime, dayPictureUrl, weather} = this.state;\n    const username = memoryUtils.user.username;\n    const title=this.getTitle();\n    return (\n        <Header style={{ background: '#fff', padding: 0,height:80,position:'fixed',left:200,right:0,zIndex:10}} >\n          <div className=\"header-top\">\n            <span style={{float:'left'}}>欢迎, {username}</span>\n            <LinkButton onClick={this.handleLogout}><Icon type=\"logout\" style={{}}/> 退出</LinkButton>\n          </div>\n          <div className=\"header-bottom\">\n            <div className=\"header-bottom-left\">{title}</div>\n            <div className=\"header-bottom-right\">\n              <span>{currentTime}</span>\n              <img src={dayPictureUrl} alt=\"weather\" style={{margin:'0 10px'}}/>\n              <span>{weather}</span>\n            </div>\n          </div>\n        </Header>\n    );\n  }\n}\nexport default withRouter(Head);"]},"metadata":{},"sourceType":"module"}